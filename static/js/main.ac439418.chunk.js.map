{"version":3,"sources":["components/main.js","components/color-picker.js","components/sidebar.js","components/highlight-popup.js","containers/highlighter.js","pages/home.js","index.js"],"names":["memo","_ref","title","body","hasSidebar","react_default","a","createElement","Wrapper","dangerouslySetInnerHTML","__html","styled","div","_templateObject","_ref2","onColorChange","color_picker_Wrapper","map","color","Swatcher","Object","assign","key","onClick","color_picker_templateObject","_templateObject2","state","filter","highlights","i","sort","b","range","endOffset","reverse","setColor","_this","setState","this","props","filteredHighlights","sidebar_Wrapper","color_picker","idx","string","Highlight","concat","PureComponent","sidebar_templateObject","_ref3","length","_ref4","sidebar_templateObject2","_ref5","clientY","clientX","showTooltip","Popup","attrs","bgColor","offsetX","offsetY","highlight_popup_templateObject","_ref6","_ref7","latestColor","onMouseUp","selection","window","getSelection","getRangeAt","empty","startOffset","highlightSpan","document","setAttribute","selectedTextNode","createTextNode","toString","appendChild","deleteContents","insertNode","currentHighlight","toConsumableArray","elm","highlight","index","findIndex","slice","objectSpread","children","highlighter_default","Fragment","main","data","sidebar_default","highlight_popup","rootElement","getElementById","ReactDOM","render","home_default"],"mappings":"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","file":"static/js/main.ac439418.chunk.js","sourcesContent":["import React, { memo } from 'react';\nimport styled from \"styled-components\";\n\nexport default memo(({title, body, hasSidebar}) => (\n  <Wrapper {...{hasSidebar}}>\n    <h1>{title}</h1>\n    <p dangerouslySetInnerHTML={{__html: body}}></p>\n  </Wrapper>\n))\n\nconst Wrapper = styled.div`\n  padding: 0 10vw;\n  transition: padding-left .3s ease-in-out;\n  padding-left: ${({hasSidebar}) => hasSidebar ? 25:10}vw;\n`;\n","import React, { memo } from \"react\";\nimport styled from \"styled-components\";\n\nexport default memo(({onColorChange}) => (\n  <Wrapper>\n  {\n    ['yellow', 'red', 'green'].map(color =>\n      <Swatcher\n        key={color}\n        onClick={() => onColorChange(color)}\n        {...{color}}\n        ></Swatcher>\n    )\n  }\n  </Wrapper>\n));\n\nconst Wrapper = styled.div`\n  display: flex;\n`;\n\nconst Swatcher = styled.div`\n  width: 30px;\n  height: 30px;\n  margin: 5px;\n  border-radius: 10px;\n  background-color: ${({color}) => color};\n`;\n","import React, { PureComponent } from 'react';\nimport styled from \"styled-components\";\n\nimport ColorPicker from \"./color-picker\";\n\nexport default class extends PureComponent {\n\n  state = { color: null };\n\n  filter = (highlights, color) => highlights\n    .filter(i => !color || i.color === color)\n    .sort((a, b) => b.range.endOffset - a.range.endOffset)\n    .reverse()\n\n  setColor = color =>\n    this.setState(({color: oldColor}) => ({color: oldColor === color ? null : color}))\n\n  render() {\n    const { props: {highlights}, state: { color }} = this;\n    const filteredHighlights = this.filter(highlights, color);\n    return (\n      <Wrapper {...{highlights}}>\n        <h2>Highlights</h2>\n        <ColorPicker onColorChange={this.setColor} />\n        {\n          filteredHighlights\n            .map(({string, range, color}, idx) =>\n              <Highlight\n                key={`${idx}-${range.endOffset}`}\n                color={color}\n                >\n                <span>{string}</span>\n              </Highlight>\n            )\n        }\n      </Wrapper>\n    )\n  }\n}\n\nconst Wrapper = styled.div`\n  position: fixed;\n  top: 0;\n  left: 0;\n  transition: all .2s ease-in-out;\n  opacity: ${({highlights}) => highlights.length ? .6:0};\n  &:hover { opacity: 1;}\n  width: ${({highlights}) => highlights.length ? 20:0}vw;\n  height: 100vh;\n  background: #efefef;\n  padding: 10px;\n`;\n\nconst Highlight = styled.a`\n  display: inline-block;\n  margin: 6px 4px;\n\n  span {\n    border-radius: 4px;\n    background-color: ${({color}) => color};\n    padding: 3px;\n  }\n`;\n","import React, { memo } from \"react\";\nimport styled from \"styled-components\";\n\nimport ColorPicker from \"./color-picker\";\n\nexport default memo(({clientY, clientX, showTooltip, setColor}) => (\n  <Popup {...{clientY, clientX, showTooltip}}>\n    <ColorPicker onColorChange={setColor} />\n  </Popup>\n))\n\nconst Popup = styled.div.attrs({bgColor: 'rgba(180,180,180,.9)', offsetX: 60, offsetY: 80})`\n  transition: opacity .2s ease-in-out;\n  opacity: ${({showTooltip})=> showTooltip ? 1 : 0};\n  pointer-events: ${({showTooltip})=> showTooltip ? 'all' : 'none'};\n  padding: 10px;\n  position: absolute;\n  top: ${({clientY, offsetY}) => clientY - offsetY}px;\n  left: ${({clientX, offsetX}) => clientX - offsetX}px;\n  background-color: ${({bgColor})=>bgColor};\n  border-radius: 10px;\n\n  /* bottom arrow */\n  &:after {\n    top: 100%;\n    left: 50%;\n    border: solid transparent;\n    content: \" \";\n    height: 0;\n    width: 0;\n    position: absolute;\n    pointer-events: none;\n    border-top-color: ${({bgColor})=>bgColor};\n    border-width: 10px;\n    margin-left: -10px;\n  }\n`;\n","import { PureComponent } from \"react\";\n\nexport default class extends PureComponent {\n\n  state = { highlights: [], clientX: 0, clientY: 0, showTooltip: false, latestColor: 'yellow' }\n\n  onMouseUp = ({ clientX, clientY }) => {\n\n    const selection = window.getSelection();\n    const range = selection.getRangeAt(0);\n    selection.empty();\n\n    // skip if its not selecting enought chars\n    if ( range.endOffset - range.startOffset === 0 ) {\n      this.setState({showTooltip: false})\n      return;\n    };\n\n    const highlightSpan = document.createElement('span');\n    highlightSpan.setAttribute('style', `background-color: ${this.state.latestColor};`)\n\n    // NOTE: clears inner spans so it doesnt breakAfter\n    // TODO: could change the highlight list as its differs from page\n    const selectedTextNode = document.createTextNode( range.toString() );\n    highlightSpan.appendChild(selectedTextNode);\n    range.deleteContents();\n    range.insertNode(highlightSpan);\n\n    const currentHighlight = { range, string: range.toString(), color: this.state.latestColor };\n\n    this.setState(({highlights, latestColor}) => ({\n      highlights: [...highlights, currentHighlight],\n      clientX, clientY, showTooltip: true,\n      setColor: color => this.setColor(highlightSpan, color, currentHighlight)\n    }));\n\n  }\n\n  // TODO: it can be used for old ones too =) but needs some more efforts\n  setColor = (elm, color, highlight) => {\n    // Replace highlight color and span background\n    this.setState(({highlights}) => {\n      const index = highlights.findIndex(({range}) => range === highlight.range);\n      return ({\n        highlights: [\n          ...highlights.slice(0, index),\n          {...highlight, color},\n          ...highlights.slice(index + 1)\n        ],\n        latestColor: color\n      })\n    }, () => elm.setAttribute('style', `background-color: ${color};`))\n  }\n\n  render() {\n    const { props: {children}, state, onMouseUp } = this;\n    return children({...state, onMouseUp })\n  }\n}\n","import React, { PureComponent } from \"react\";\n\nimport Main from \"../components/main\";\nimport Sidebar from \"../components/sidebar\";\nimport Popup from \"../components/highlight-popup\";\nimport Highlighter from \"../containers/highlighter\";\n\nexport default class extends PureComponent {\n  render() {\n    return (\n      <Highlighter>\n        {({highlights, onMouseUp, clientX, clientY, showTooltip, setColor}) => (\n        <>\n          <div onMouseUp={onMouseUp}>\n            <Main {...data} hasSidebar={highlights.length} />\n          </div>\n          <Sidebar {...{highlights}} />\n          <Popup {...{clientX, clientY, showTooltip, setColor }} />\n        </>\n        )}\n      </Highlighter>\n    )\n  }\n}\n\n// This might be fetched from an API, but for this assignment I'm just keeping it simple\n// I like to keep some declarations bellow like this because it helps with readability\nconst data = {\n  title: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit\",\n  body: \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Illa videamus, quae a te de amicitia dicta sunt. Iam id ipsum absurdum, maximum malum neglegi. Haeret in salebra. Quibus rebus vita consentiens virtutibusque respondens recta et honesta et constans et naturae congruens existimari potest. Experiamur igitur, inquit, etsi habet haec Stoicorum ratio difficilius quiddam et obscurius. Roges enim Aristonem, bonane ei videantur haec: vacuitas doloris, divitiae, valitudo; Hic quoque suus est de summoque bono dissentiens dici vere Peripateticus non potest. Duo Reges: constructio interrete. Nos quidem Virtutes sic natae sumus, ut tibi serviremus, aliud negotii nihil habemus. Gerendus est mos, modo recte sentiat. Sed quoniam et advesperascit et mihi ad villam revertendum est, nunc quidem hactenus; Cum id quoque, ut cupiebat, audivisset, evelli iussit eam, qua erat transfixus, hastam. A villa enim, credo, et: Si ibi te esse scissem, ad te ipse venissem. Nisi autem rerum natura perspecta erit, nullo modo poterimus sensuum iudicia defendere. Cum autem in quo sapienter dicimus, id a primo rectissime dicitur. Sit enim idem caecus, debilis. Pauca mutat vel plura sane; Ut in geometria, prima si dederis, danda sunt omnia. Quo studio Aristophanem putamus aetatem in litteris duxisse? Octavio fuit, cum illam severitatem in eo filio adhibuit, quem in adoptionem D. At ille non pertimuit saneque fidenter: Istis quidem ipsis verbis, inquit;\"\n};\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport \"./styles.css\";\n\nimport Home from \"./pages/home\";\n\nconst rootElement = document.getElementById(\"root\");\nReactDOM.render(<Home />, rootElement);\n"],"sourceRoot":""}